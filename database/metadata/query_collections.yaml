- name: allowed-queries
  definition:
    queries:
      - name: Topic
        query: |
          query GET_TOPIC ($slug: String, $audience: numeric) {
            topic(where: {slug:{_eq:$slug}}) {
              name
              image
              created_at
              descriptions(where: {audience:{_eq:$audience}}) {
                short
              }
              relationships(where: {audience:{_eq:$audience}}) {
                to {
                  name
                  image
                }
                description
              }
            }
          }
      - name: Topic_All_Audiences
        query: |
          query GET_TOPIC_ALL_AUDIENCES ($slug: String) {
            topic(where: {slug:{_eq:$slug}}) {
              name
              image
              created_at
              descriptions {
                short
                audience
              }
              relationships {
                audience
                to {
                  name
                  image
                }
                description
              }
            }
          }
      - name: Topics
        query: |
          query TOPICS {
            topic {
              name
              relationships {
                priority
                description
                to {
                  name
                }
              }
            }
          }
